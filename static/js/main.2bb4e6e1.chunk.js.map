{"version":3,"sources":["context/createDataContext.js","context/MoviesContext.js","services/logService.js","services/httpService.js","context/AuthContext.js","components/navBar.js","services/genreService.js","services/movieService.js","seedData/seedMovies.js","components/common/searchBox.js","components/common/pagination.js","components/common/listGroup.js","components/common/like.js","components/common/tableHeader.js","components/common/tableBody.js","components/common/table.js","components/moviesTable.js","components/movies.js","utils/paginate.js","components/rentals.js","components/customers.js","components/common/input.js","components/common/select.js","components/common/form.js","components/movieForm.js","components/loginForm.js","services/authService.js","components/registerForm.js","services/userService.js","components/notFound.js","components/logout.js","components/common/protectedRoute.js","App.js","serviceWorker.js","index.js"],"names":["reducer","actions","initialState","localStorageName","Context","React","createContext","Provider","children","useReducer","state","dispatch","useEffect","localStorage","setItem","JSON","stringify","boundedActions","Object","keys","reduce","result","key","value","allMovies","genres","_id","name","selectedGenre","currentPage","sortColumn","path","order","query","createDataContext","action","type","payload","filter","m","map","liked","loadData","removeMovie","movie","toggleMovieLike","selectPage","page","selectGenre","genre","updateSortColumn","updateQuery","setAllMovies","parse","window","getItem","init","Sentry","dsn","log","error","console","setHttpJwt","jwt","axios","defaults","headers","common","baseURL","process","interceptors","response","use","status","logger","toast","Promise","reject","get","post","put","delete","user","jwtDecode","setJwt","logout","savedData","loadStorage","NavBar","authState","useContext","AuthContext","className","to","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","getGenres","http","movieUrl","getMovies","deleteMovie","movieId","getMovie","saveMovie","body","data","movies","title","numberInStock","dailyRentalRate","SearchBox","onSearch","onChange","e","currentTarget","placeholder","Pagination","itemsCount","pageSize","onPageChange","numOfPages","Math","ceil","isMultiPages","pages","_","range","isFirstPage","isLastPage","onClick","ListGroup","items","selectedItem","onItemSelect","valueProperty","textProperty","item","style","cursor","Like","fontSize","TableHeader","columns","onSort","renderHeaderCell","column","raiseSort","label","renderSortIcon","TableBody","createKey","content","renderCell","Table","MoviesTable","onLike","onDelete","admin_columns","isAdmin","Movies","history","MoviesContext","loadDataFunc","useRef","a","genresData","moviesData","current","loadMovies","count","handleDelete","moviesClone","cloneDeep","resetData","all","g","seedData","genreData","genreId","push","filtered","toLowerCase","includes","slice","paginate","orderBy","totalCount","length","getPagedData","marginBottom","Rentals","Customers","Input","autoFocus","rest","htmlFor","Select","dataSet","option","Form","schema","submitAction","inputList","setData","setErrors","errors","buttonLabel","handleChange","errObj","errorMessage","validateProperty","Joi","object","validate","details","message","validateAll","abortEarly","renderInput","onSubmit","preventDefault","input","disabled","string","required","number","integer","min","max","MovieForm","match","params","useState","setMovie","setGenres","mapToViewModel","movieFromDb","replace","loadGenres","loadMovie","email","minDomainSegments","tlds","allow","password","LoginForm","location","credentials","setCredentials","from","pathname","RegisterForm","newUser","setNewUser","NotFound","Logout","logoutFunc","ProtectedRoute","Component","component","render","props","App","role","hello","exact","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.2bb4e6e1.chunk.js","sourcesContent":["import React, { useReducer, useEffect } from 'react';\r\n\r\nexport default (reducer, actions, initialState, localStorageName = '') => {\r\n  const Context = React.createContext();\r\n\r\n  const Provider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n    useEffect(() => {\r\n      if (localStorageName) localStorage.setItem(localStorageName, JSON.stringify(state));\r\n    }, [state]);\r\n\r\n    const boundedActions = Object.keys(actions).reduce((result, key) => {\r\n      return { ...result, [key]: actions[key](dispatch) };\r\n    }, {});\r\n\r\n    return <Context.Provider value={{ state, ...boundedActions }}>{children}</Context.Provider>;\r\n  };\r\n\r\n  return { Context, Provider };\r\n};\r\n","import createDataContext from './createDataContext';\r\n\r\nconst initialState = {\r\n  allMovies: [],\r\n  genres: [{ _id: '', name: 'All Genres' }],\r\n  selectedGenre: null,\r\n  currentPage: 1,\r\n  sortColumn: { path: 'title', order: 'asc' },\r\n  query: ''\r\n};\r\n\r\nconst moviesReducer = (state, action) => {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case 'load_data':\r\n      return {\r\n        ...initialState,\r\n        genres: [...initialState.genres, ...payload.genres],\r\n        allMovies: payload.allMovies,\r\n        selectedGenre: initialState.genres[0]\r\n      };\r\n    case 'remove_movie':\r\n      return { ...state, allMovies: state.allMovies.filter(m => m._id !== payload._id) };\r\n\r\n    case 'toggle_movie_like':\r\n      return {\r\n        ...state,\r\n        allMovies: state.allMovies.map(m => (m._id === payload._id ? { ...m, liked: !m.liked } : m))\r\n      };\r\n\r\n    case 'select_page':\r\n      return { ...state, currentPage: payload };\r\n\r\n    case 'select_genre':\r\n      return { ...state, selectedGenre: payload, currentPage: 1, query: '' };\r\n\r\n    case 'update_sort_column':\r\n      return { ...state, sortColumn: payload };\r\n\r\n    case 'set_all_movies':\r\n      return { ...state, allMovies: payload };\r\n\r\n    case 'update_query':\r\n      return { ...state, query: payload, selectedGenre: initialState.genres[0], currentPage: 1 };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst loadData = dispatch => (allMovies, genres) =>\r\n  dispatch({ type: 'load_data', payload: { allMovies, genres } });\r\n\r\nconst removeMovie = dispatch => movie => dispatch({ type: 'remove_movie', payload: movie });\r\n\r\nconst toggleMovieLike = dispatch => movie =>\r\n  dispatch({ type: 'toggle_movie_like', payload: movie });\r\n\r\nconst selectPage = dispatch => page => dispatch({ type: 'select_page', payload: page });\r\n\r\nconst selectGenre = dispatch => genre => dispatch({ type: 'select_genre', payload: genre });\r\n\r\nconst updateSortColumn = dispatch => sortColumn =>\r\n  dispatch({ type: 'update_sort_column', payload: sortColumn });\r\n\r\nconst updateQuery = dispatch => query => dispatch({ type: 'update_query', payload: query });\r\n\r\nconst setAllMovies = dispatch => allMovies =>\r\n  dispatch({ type: 'set_all_movies', payload: allMovies });\r\n\r\nconst loadStorage = () => {\r\n  const savedData = JSON.parse(window.localStorage.getItem('movies'));\r\n  return savedData || initialState;\r\n};\r\n\r\nexport const { Context, Provider } = createDataContext(\r\n  moviesReducer,\r\n  {\r\n    loadData,\r\n    removeMovie,\r\n    toggleMovieLike,\r\n    selectPage,\r\n    selectGenre,\r\n    updateSortColumn,\r\n    updateQuery,\r\n    setAllMovies\r\n  },\r\n  loadStorage(),\r\n  'movies'\r\n);\r\n","import * as Sentry from '@sentry/browser';\r\n\r\nfunction init() {\r\n  Sentry.init({ dsn: 'https://d0ceff7dfcd24286a59cda79d91f4752@sentry.io/5186000' });\r\n}\r\n\r\nfunction log(error) {\r\n  Sentry.captureException(error);\r\n  console.error(error);\r\n}\r\n\r\nexport default {\r\n  init,\r\n  log\r\n};\r\n","import axios from 'axios';\r\nimport logger from './logService';\r\nimport { toast } from 'react-toastify';\r\nimport config from '../config.json';\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL || config.apiEndPoint;\r\n\r\naxios.interceptors.response.use(null, error => {\r\n  const expectedError = error.response && error.response.status >= 400 && error.response.status < 500;\r\n\r\n  if (!expectedError) {\r\n    logger.log(error);\r\n    toast.error('An unexpected error occurrred.');\r\n  }\r\n\r\n  return Promise.reject(error);\r\n});\r\n\r\nexport function setHttpJwt(jwt) {\r\n  axios.defaults.headers.common['x-auth-token'] = jwt;\r\n}\r\n\r\nexport default {\r\n  get: axios.get,\r\n  post: axios.post,\r\n  put: axios.put,\r\n  delete: axios.delete\r\n};\r\n","import createDataContext from './createDataContext';\r\nimport jwtDecode from 'jwt-decode';\r\nimport { setHttpJwt } from '../services/httpService';\r\n\r\nconst initialState = { jwt: '' };\r\n\r\nconst authReducer = (state, action) => {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case 'set_jwt':\r\n      setHttpJwt(payload);\r\n      return { jwt: payload, user: jwtDecode(payload) };\r\n    case 'logout':\r\n      setHttpJwt('');\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst setJwt = dispatch => jwt => dispatch({ type: 'set_jwt', payload: jwt });\r\n\r\nconst logout = dispatch => () => dispatch({ type: 'logout' });\r\n\r\nconst loadStorage = () => {\r\n  const savedData = JSON.parse(window.localStorage.getItem('token'));\r\n  savedData && setHttpJwt(savedData.jwt);\r\n  return savedData || initialState;\r\n};\r\n\r\nexport const { Context, Provider } = createDataContext(\r\n  authReducer,\r\n  {\r\n    setJwt,\r\n    logout\r\n  },\r\n  loadStorage(),\r\n  'token'\r\n);\r\n","import React, { useContext } from 'react';\nimport { Context as AuthContext } from '../context/AuthContext';\nimport { Link, NavLink } from 'react-router-dom';\n\nconst NavBar = () => {\n  const { state: authState } = useContext(AuthContext);\n\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\n      <Link to=\"/\" className=\"navbar-brand\">\n        Vidly\n      </Link>\n      <button\n        className=\"navbar-toggler\"\n        type=\"button\"\n        data-toggle=\"collapse\"\n        data-target=\"#navbarNav\"\n        aria-controls=\"navbarNav\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span className=\"navbar-toggler-icon\"></span>\n      </button>\n      <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\n        <div className=\"navbar-nav\">\n          <NavLink to=\"/movies\" className=\"nav-link\">\n            Movies\n          </NavLink>\n          <NavLink to=\"/customers\" className=\"nav-link\">\n            Customers\n          </NavLink>\n          <NavLink to=\"/rentals\" className=\"nav-link\">\n            Rentals\n          </NavLink>\n          {!authState.user && (\n            <>\n              <NavLink to=\"/login\" className=\"nav-link\">\n                Login\n              </NavLink>\n              <NavLink to=\"/register\" className=\"nav-link\">\n                Register\n              </NavLink>\n            </>\n          )}\n          {authState.user && (\n            <>\n              <NavLink to=\"/profile\" className=\"nav-link\">\n                {authState.user.name}\n              </NavLink>\n              <NavLink to=\"/logout\" className=\"nav-link\">\n                Logout\n              </NavLink>\n            </>\n          )}\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default NavBar;\n","import http from './httpService';\r\n\r\nconst apiEndpoint = '/genres';\r\n\r\nexport function getGenres() {\r\n  return http.get(apiEndpoint);\r\n}\r\n","import http from './httpService';\r\n\r\nconst apiEndpoint = '/movies';\r\n\r\nfunction movieUrl(id) {\r\n  return `${apiEndpoint}/${id}`;\r\n}\r\n\r\nexport function getMovies() {\r\n  return http.get(apiEndpoint);\r\n}\r\n\r\nexport function deleteMovie(movieId) {\r\n  return http.delete(movieUrl(movieId));\r\n}\r\n\r\nexport function getMovie(movieId) {\r\n  return http.get(movieUrl(movieId));\r\n}\r\n\r\nexport function saveMovie(movie) {\r\n  if (movie._id) {\r\n    const body = { ...movie };\r\n    delete body._id;\r\n    return http.put(movieUrl(movie._id), body);\r\n  }\r\n  console.log(movie);\r\n  return http.post(apiEndpoint, movie);\r\n}\r\n","const data = [\r\n  {\r\n    name: 'Comedy',\r\n    movies: [\r\n      { title: 'Airplane', numberInStock: 5, dailyRentalRate: 2 },\r\n      { title: 'The Hangover', numberInStock: 10, dailyRentalRate: 2 },\r\n      { title: 'Wedding Crashers', numberInStock: 15, dailyRentalRate: 2 }\r\n    ]\r\n  },\r\n  {\r\n    name: 'Action',\r\n    movies: [\r\n      { title: 'Die Hard', numberInStock: 5, dailyRentalRate: 2 },\r\n      { title: 'Terminator', numberInStock: 10, dailyRentalRate: 2 },\r\n      { title: 'The Avengers', numberInStock: 15, dailyRentalRate: 2 }\r\n    ]\r\n  },\r\n  {\r\n    name: 'Romance',\r\n    movies: [\r\n      { title: 'The Notebook', numberInStock: 5, dailyRentalRate: 2 },\r\n      { title: 'When Harry Met Sally', numberInStock: 10, dailyRentalRate: 2 },\r\n      { title: 'Pretty Woman', numberInStock: 15, dailyRentalRate: 2 }\r\n    ]\r\n  },\r\n  {\r\n    name: 'Thriller',\r\n    movies: [\r\n      { title: 'The Sixth Sense', numberInStock: 5, dailyRentalRate: 2 },\r\n      { title: 'Gone Girl', numberInStock: 10, dailyRentalRate: 2 },\r\n      { title: 'The Others', numberInStock: 15, dailyRentalRate: 2 }\r\n    ]\r\n  }\r\n];\r\n\r\nexport default data;\r\n","import React from 'react';\r\n\r\nconst SearchBox = ({ query, onSearch }) => {\r\n  return <input type='text' className='form-control my-3' value={query} onChange={e => onSearch(e.currentTarget.value)} placeholder='Search...' />;\r\n};\r\n\r\nexport default SearchBox;\r\n","import React from 'react';\nimport _ from 'lodash';\n\nconst Pagination = ({ currentPage, itemsCount, pageSize, onPageChange }) => {\n  const numOfPages = Math.ceil(itemsCount / pageSize);\n\n  const isMultiPages = numOfPages > 1;\n\n  const pages = _.range(1, numOfPages + 1);\n\n  const isFirstPage = currentPage === 1;\n  const isLastPage = currentPage === numOfPages;\n\n  if (!isMultiPages) return null;\n\n  return (\n    <nav aria-label=\"Page navigation example\">\n      <ul className=\"pagination\">\n        {isMultiPages && (\n          <li className={`page-item ${isFirstPage && 'disabled'}`}>\n            <span className=\"page-link\" onClick={() => onPageChange(1)}>\n              First\n            </span>\n          </li>\n        )}\n\n        {pages.map(page => (\n          <li key={page} className={`page-item  ${page === currentPage && 'active'}`}>\n            <span className=\"page-link\" onClick={() => onPageChange(page)}>\n              {page}\n            </span>\n          </li>\n        ))}\n\n        {isMultiPages && (\n          <li className={`page-item ${isLastPage && 'disabled'}`}>\n            <span className=\"page-link\" onClick={() => onPageChange(numOfPages)}>\n              Last\n            </span>\n          </li>\n        )}\n      </ul>\n    </nav>\n  );\n};\n\nexport default Pagination;\n","import React from 'react';\n\nconst ListGroup = ({\n  items,\n  selectedItem,\n  onItemSelect,\n  valueProperty = '_id',\n  textProperty = 'name'\n}) => {\n  return (\n    <ul className=\"list-group\">\n      {items.map(item => (\n        <li\n          key={item[valueProperty]}\n          className={`list-group-item ${item === selectedItem && 'active'}`}\n          style={{ cursor: 'pointer' }}\n          onClick={() => onItemSelect(item)}\n        >\n          {item[textProperty]}\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default ListGroup;\n","import React from 'react';\n\nconst Like = ({ liked, onClick }) => {\n  return (\n    <i\n      onClick={onClick}\n      className={`fa ${liked ? 'fa-heart' : 'fa-heart-o'}`}\n      style={{ fontSize: 24, cursor: 'pointer' }}\n    ></i>\n  );\n};\n\nexport default Like;\n","import React from 'react';\n\nconst TableHeader = ({ columns, sortColumn, onSort }) => {\n  const raiseSort = path => {\n    const order = path === sortColumn.path && sortColumn.order === 'asc' ? 'desc' : 'asc';\n    onSort({ path, order });\n  };\n\n  const renderSortIcon = column => {\n    const { path, order } = sortColumn;\n    if (column.path !== path) return null;\n    return <i className={`fa fa-sort-${order}`}></i>;\n  };\n\n  const renderHeaderCell = column => {\n    if (column.path)\n      return (\n        <th key={column.path} onClick={() => raiseSort(column.path)} className={'clickable'}>\n          {column.label}\n          {renderSortIcon(column)}\n        </th>\n      );\n    return <th key={column.key}></th>;\n  };\n\n  return (\n    <thead>\n      <tr>{columns.map(column => renderHeaderCell(column))}</tr>\n    </thead>\n  );\n};\n\nexport default TableHeader;\n","import React from 'react';\nimport _ from 'lodash';\n\nconst TableBody = ({ data, columns }) => {\n  const renderCell = (item, column) => {\n    if (column.content) return column.content(item);\n    return _.get(item, column.path);\n  };\n\n  const createKey = (item, column) => item._id + (column.path || column.key);\n\n  return (\n    <tbody>\n      {data.map(item => (\n        <tr key={item._id}>\n          {columns.map(column => (\n            <td key={createKey(item, column)}>{renderCell(item, column)}</td>\n          ))}\n        </tr>\n      ))}\n    </tbody>\n  );\n};\n\nexport default TableBody;\n","import React from 'react';\nimport TableHeader from './tableHeader';\nimport TableBody from './tableBody';\n\nconst Table = ({ columns, sortColumn, onSort, data }) => {\n  return (\n    <table className=\"table\">\n      <TableHeader columns={columns} sortColumn={sortColumn} onSort={onSort} />\n      <TableBody data={data} columns={columns} />\n    </table>\n  );\n};\n\nexport default Table;\n","import React, { useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Context as AuthContext } from '../context/AuthContext';\r\nimport Like from './common/like';\r\nimport Table from './common/table';\r\n\r\nconst MoviesTable = ({ movies, onLike, onDelete, onSort, sortColumn }) => {\r\n  let columns = [\r\n    {\r\n      path: 'title',\r\n      label: 'Title',\r\n      content: movie => <Link to={`/movies/${movie._id}`}>{movie.title}</Link>\r\n    },\r\n    { path: 'genre.name', label: 'Genre' },\r\n    { path: 'numberInStock', label: 'Stock' },\r\n    { path: 'dailyRentalRate', label: 'Rate' },\r\n    {\r\n      key: 'like',\r\n      content: movie => <Like liked={movie.liked} onClick={() => onLike(movie)} />\r\n    }\r\n  ];\r\n\r\n  const admin_columns = [\r\n    {\r\n      key: 'delete',\r\n      content: movie => (\r\n        <button onClick={() => onDelete(movie)} className=\"btn btn-danger btn-sm\">\r\n          Delete\r\n        </button>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const { state: authState } = useContext(AuthContext);\r\n\r\n  if (authState.user && authState.user.isAdmin) columns = [...columns, ...admin_columns];\r\n\r\n  return <Table data={movies} onSort={onSort} sortColumn={sortColumn} columns={columns} />;\r\n};\r\n\r\nexport default MoviesTable;\r\n","import React, { useEffect, useContext, useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport _ from 'lodash';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { getGenres } from '../services/genreService';\r\nimport { getMovies, deleteMovie, saveMovie } from '../services/movieService';\r\nimport seedData from '../seedData/seedMovies';\r\nimport { paginate } from '../utils/paginate';\r\n\r\nimport { Context as MoviesContext } from '../context/MoviesContext';\r\nimport { Context as AuthContext } from '../context/AuthContext';\r\n\r\nimport SearchBox from './common/searchBox';\r\nimport Pagination from './common/pagination';\r\nimport ListGroup from './common/listGroup';\r\nimport MoviesTable from './moviesTable';\r\n\r\nconst Movies = ({ history }) => {\r\n  const MAX_PAGE_SIZE = 4;\r\n\r\n  const {\r\n    loadData,\r\n    removeMovie,\r\n    toggleMovieLike,\r\n    selectPage,\r\n    selectGenre,\r\n    updateSortColumn,\r\n    updateQuery,\r\n    setAllMovies,\r\n    state\r\n  } = useContext(MoviesContext);\r\n\r\n  const { state: authState } = useContext(AuthContext);\r\n\r\n  const loadDataFunc = useRef(loadData);\r\n\r\n  useEffect(() => {\r\n    async function loadMovies() {\r\n      const { data: genresData } = await getGenres();\r\n      const { data: moviesData } = await getMovies();\r\n      loadDataFunc.current(moviesData, genresData);\r\n    }\r\n    loadMovies();\r\n  }, []);\r\n\r\n  const { allMovies, genres, selectedGenre, currentPage, sortColumn, query } = state;\r\n\r\n  if (allMovies.count === 0) return <p> There are no movies in the database.</p>;\r\n\r\n  const handleDelete = async movie => {\r\n    const moviesClone = _.cloneDeep(state.allMovies);\r\n    try {\r\n      removeMovie(movie);\r\n      await deleteMovie(movie._id);\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 404) toast.error('This movie has already been deleted.');\r\n\r\n      setAllMovies(moviesClone);\r\n    }\r\n  };\r\n\r\n  const handleLike = movie => {\r\n    toggleMovieLike(movie);\r\n  };\r\n\r\n  const handlePageChange = page => selectPage(page);\r\n\r\n  const handleGenreSelect = genre => selectGenre(genre);\r\n\r\n  const handleSort = sortColumn => updateSortColumn(sortColumn);\r\n\r\n  const handleSearch = query => updateQuery(query);\r\n\r\n  const resetData = async () => {\r\n    await Promise.all(allMovies.map(m => deleteMovie(m._id)));\r\n    genres.map(g =>\r\n      seedData.map(async genreData =>\r\n        genreData.name === g.name\r\n          ? await Promise.all(genreData.movies.map(m => saveMovie({ ...m, genreId: g._id })))\r\n          : null\r\n      )\r\n    );\r\n    history.push('/');\r\n  };\r\n\r\n  const getPagedData = () => {\r\n    let filtered;\r\n    if (query) {\r\n      filtered = allMovies.filter(\r\n        m => m.title.toLowerCase().includes(query) || m.genre.name.toLowerCase().includes(query)\r\n      );\r\n    } else {\r\n      filtered =\r\n        selectedGenre && selectedGenre._id ? allMovies.filter(m => m.genre._id === selectedGenre._id) : allMovies;\r\n    }\r\n\r\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]);\r\n\r\n    const movies = paginate(sorted, currentPage, MAX_PAGE_SIZE);\r\n\r\n    return { totalCount: filtered.length, movies };\r\n  };\r\n\r\n  const { totalCount, movies } = getPagedData();\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-3\">\r\n        <ListGroup items={genres} selectedItem={selectedGenre} onItemSelect={handleGenreSelect} />\r\n      </div>\r\n      <div className=\"col\">\r\n        {authState.user && (\r\n          <Link to=\"/movies/new\" className=\"btn btn-primary\" style={{ marginBottom: 20 }}>\r\n            New Movie\r\n          </Link>\r\n        )}\r\n        <button onClick={resetData} className=\"btn btn-success ml-3\" style={{ marginBottom: 20 }}>\r\n          Reset Data\r\n        </button>\r\n\r\n        <p>Displaying {totalCount} movies in the database...</p>\r\n        <SearchBox query={query} onSearch={handleSearch} />\r\n        <MoviesTable\r\n          movies={movies}\r\n          onLike={handleLike}\r\n          onDelete={handleDelete}\r\n          sortColumn={sortColumn}\r\n          onSort={handleSort}\r\n        />\r\n        <Pagination\r\n          currentPage={currentPage}\r\n          itemsCount={totalCount}\r\n          pageSize={MAX_PAGE_SIZE}\r\n          onPageChange={handlePageChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Movies;\r\n","export const paginate = (data, currentPage, pageSize) =>\n  data.slice((currentPage - 1) * pageSize, currentPage * pageSize);\n","import React from 'react';\n\nconst Rentals = () => {\n  return (\n    <div>\n      <h1>Rentals</h1>\n      <p>Demo Content to display Routing</p>\n    </div>\n  );\n};\n\nexport default Rentals;\n","import React from 'react';\n\nconst Customers = () => {\n  return (\n    <div>\n      <h1>Customers</h1>\n      <p>Demo Content to display Routing</p>\n    </div>\n  );\n};\n\nexport default Customers;\n","import React from 'react';\n\nconst Input = ({  autoFocus = false, type=\"text\", name , label, error, ...rest}) => {\n  return (\n    <div className='form-group'>\n      <label htmlFor={name}>{label}</label>\n      <input\n        name={name}\n        {...rest}\n        type={type}\n        autoFocus={autoFocus}\n        id={name}\n        className='form-control'\n      />\n      {error && <div className='alert alert-danger'>{error}</div>}\n    </div>\n  );\n};\n\nexport default Input;\n","import React from 'react';\r\n\r\nconst Select = ({ name, value, dataSet, onChange }) => {\r\n  return (\r\n    <div className='form-group'>\r\n      <label htmlFor={name}>Example select</label>\r\n      <select className='form-control' id={{ name }} name={name} value={value} onChange={onChange}>\r\n        <option value=''>Please Select</option>\r\n        {dataSet.map(option => (\r\n          <option key={option._id} value={option._id}>\r\n            {option.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import React from 'react';\nimport Joi from '@hapi/joi';\nimport Input from './input';\nimport Select from './select';\n\nconst Form = ({ schema, submitAction, inputList, data, setData, setErrors, errors, buttonLabel }) => {\n  const handleSubmit = e => {\n    e.preventDefault();\n    let errObj = validateAll();\n    if (errObj) return setErrors(errObj);\n    setErrors({});\n    submitAction();\n  };\n\n  const handleChange = ({ currentTarget: { name, value } }) => {\n    const errObj = { ...errors };\n    const errorMessage = validateProperty({ name, value });\n    if (errorMessage) errObj[name] = errorMessage;\n    else delete errObj[name];\n\n    setData({ ...data, [name]: value });\n    setErrors(errObj);\n  };\n\n  const validateProperty = ({ name, value }) => {\n    const { error } = Joi.object({ [name]: schema[name] }).validate({ [name]: value });\n    return error ? error.details[0].message : null;\n  };\n\n  const validateAll = () => {\n    const options = { abortEarly: false };\n    const { error } = Joi.object(schema).validate(data, options);\n    if (!error) return null;\n\n    let errObj = {};\n    error.details.map(item => (errObj[item.path[0]] = item.message));\n    return errObj;\n  };\n\n  const renderInput = ({ name, label, type = 'text', autoFocus, dataSet }) => {\n    switch (type) {\n      case 'number':\n      case 'password':\n      case 'text':\n        return (\n          <Input\n            key={name}\n            name={name}\n            label={label}\n            value={data[name]}\n            type={type}\n            onChange={handleChange}\n            error={errors[name]}\n            autoFocus={autoFocus}\n          />\n        );\n      case 'select':\n        return (\n          <Select\n            name={name}\n            value={data[name]}\n            key={name}\n            dataSet={dataSet}\n            onChange={handleChange}\n            error={errors[name]}\n          />\n        );\n      default:\n        break;\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      {inputList.map(input => renderInput(input))}\n      <button className=\"btn btn-primary\" disabled={validateAll()}>\n        {buttonLabel}\n      </button>\n    </form>\n  );\n};\n\nexport default Form;\n","import React, { useState, useEffect } from 'react';\r\nimport Joi from '@hapi/joi';\r\nimport { getMovie, saveMovie } from '../services/movieService';\r\nimport { getGenres } from '../services/genreService';\r\n\r\nimport Form from './common/form';\r\n\r\nconst schema = {\r\n  _id: Joi.string(),\r\n  title: Joi.string()\r\n    .required()\r\n    .label('Title'),\r\n  genreId: Joi.string()\r\n    .required()\r\n    .label('Genre'),\r\n  numberInStock: Joi.number()\r\n    .integer()\r\n    .required()\r\n    .min(0)\r\n    .max(100)\r\n    .label('Number In Stock'),\r\n  dailyRentalRate: Joi.number()\r\n    .required()\r\n    .min(0)\r\n    .max(100)\r\n    .label('Daily Dental Rate')\r\n};\r\n\r\nconst MovieForm = ({ match, history }) => {\r\n  const { movieId } = match.params;\r\n\r\n  const [movie, setMovie] = useState({\r\n    title: '',\r\n    genreId: '',\r\n    numberInStock: '',\r\n    dailyRentalRate: ''\r\n  });\r\n\r\n  const [genres, setGenres] = useState([]);\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const mapToViewModel = movie => ({\r\n    _id: movie._id,\r\n    title: movie.title,\r\n    genreId: movie.genre._id,\r\n    numberInStock: movie.numberInStock,\r\n    dailyRentalRate: movie.dailyRentalRate\r\n  });\r\n\r\n  useEffect(() => {\r\n    async function loadGenres() {\r\n      const { data: genresData } = await getGenres();\r\n      setGenres(genresData);\r\n    }\r\n    async function loadMovie() {\r\n      try {\r\n        if (movieId === 'new') return;\r\n        const { data: movieFromDb } = await getMovie(movieId);\r\n        setMovie(mapToViewModel(movieFromDb));\r\n      } catch (ex) {\r\n        if (ex.response && ex.response.status === 404) return history.replace('/not-found');\r\n      }\r\n    }\r\n\r\n    loadGenres();\r\n    loadMovie();\r\n  }, [movieId, history]);\r\n\r\n  const submitAction = () => {\r\n    saveMovie(movie);\r\n    history.push('/movies');\r\n  };\r\n\r\n  const inputList = [\r\n    { name: 'title', label: 'Title', autoFocus: true },\r\n    { name: 'genreId', label: 'Genre', type: 'select', dataSet: genres },\r\n    { name: 'numberInStock', label: 'Number In Stock', type: 'number' },\r\n    { name: 'dailyRentalRate', label: 'Daily Rental Rate', type: 'number' }\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <h1>Movie Form</h1>\r\n      <Form\r\n        inputList={inputList}\r\n        schema={schema}\r\n        submitAction={submitAction}\r\n        data={movie}\r\n        setData={setMovie}\r\n        errors={errors}\r\n        setErrors={setErrors}\r\n        buttonLabel=\"Save\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MovieForm;\r\n","import React, { useState, useContext } from 'react';\r\nimport Joi from '@hapi/joi';\r\n\r\nimport { Context as AuthContext } from '../context/AuthContext';\r\nimport { login } from '../services/authService';\r\nimport Form from './common/form';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nconst schema = {\r\n  email: Joi.string()\r\n    .required()\r\n    .email({ minDomainSegments: 2, tlds: { allow: ['com', 'net'] } })\r\n    .label('Email'),\r\n  password: Joi.string()\r\n    .min(5)\r\n    .required()\r\n    .label('Password')\r\n};\r\n\r\nconst LoginForm = ({ history, location }) => {\r\n  const [credentials, setCredentials] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const { setJwt, state: authState } = useContext(AuthContext);\r\n\r\n  const submitAction = async () => {\r\n    try {\r\n      const { data: jwt } = await login(credentials.email, credentials.password);\r\n      setJwt(jwt);\r\n      // Redirect Back if State Exist in Location\r\n      location.state ? history.push(location.state.from.pathname) : history.push('/');\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 400) {\r\n        setErrors({ email: ex.response.data });\r\n      }\r\n    }\r\n  };\r\n\r\n  const inputList = [\r\n    { name: 'email', label: 'Email', autoFocus: true },\r\n    { name: 'password', label: 'Password', type: 'password' }\r\n  ];\r\n\r\n  if (authState.user) return <Redirect to=\"/\" />;\r\n\r\n  return (\r\n    <div>\r\n      <h1>Login</h1>\r\n      <Form\r\n        inputList={inputList}\r\n        schema={schema}\r\n        submitAction={submitAction}\r\n        data={credentials}\r\n        setData={setCredentials}\r\n        errors={errors}\r\n        setErrors={setErrors}\r\n        buttonLabel=\"Login\"\r\n      />\r\n      <hr />\r\n      <p>Demo mode</p>\r\n      <p>Admin Account: admin@admin.com</p>\r\n      <p>Admin Password: 123456</p>\r\n      <hr />\r\n      <p>Normal Account: user@user.com</p>\r\n      <p>Normal Password: 123456</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n","import http from './httpService';\r\n\r\nconst apiEndpoint = '/auth';\r\n\r\nexport function login(email, password) {\r\n  return http.post(apiEndpoint, { email, password });\r\n}\r\n","import React, { useState, useContext } from 'react';\nimport Joi from '@hapi/joi';\nimport { Context as AuthContext } from '../context/AuthContext';\nimport { register } from '../services/userService';\nimport Form from './common/form';\n\nconst schema = {\n  email: Joi.string()\n    .required()\n    .email({ minDomainSegments: 2, tlds: { allow: ['com', 'net'] } })\n    .label('Email'),\n  password: Joi.string()\n    .required()\n    .min(5)\n    .label('Password'),\n  name: Joi.string()\n    .required()\n    .label('Name')\n};\n\nconst RegisterForm = ({ history }) => {\n  const [newUser, setNewUser] = useState({\n    email: '',\n    password: '',\n    name: ''\n  });\n\n  const [errors, setErrors] = useState({});\n\n  const { setJwt } = useContext(AuthContext);\n\n  const submitAction = async () => {\n    try {\n      const response = await register(newUser);\n      console.log(response);\n      setJwt(response.headers['x-auth-token']);\n      history.push('/');\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400) {\n        setErrors({ email: ex.response.data });\n      }\n    }\n  };\n\n  const inputList = [\n    { name: 'email', label: 'Email', autoFocus: true },\n    { name: 'password', label: 'Password', type: 'password' },\n    { name: 'name', label: 'Name' }\n  ];\n\n  return (\n    <div>\n      <h1>Register</h1>\n      <Form\n        inputList={inputList}\n        schema={schema}\n        submitAction={submitAction}\n        data={newUser}\n        setData={setNewUser}\n        errors={errors}\n        setErrors={setErrors}\n        buttonLabel=\"Register\"\n      />\n    </div>\n  );\n};\n\nexport default RegisterForm;\n","import http from './httpService';\r\n\r\nconst apiEndpoint = '/users';\r\n\r\nexport function register(user) {\r\n  return http.post(apiEndpoint, user);\r\n}\r\n","import React from 'react';\n\nconst NotFound = () => {\n  return (\n    <div>\n      <h1>Not Found</h1>\n      <p>Oopppppsss this page doesn't exist!</p>\n    </div>\n  );\n};\n\nexport default NotFound;\n","import React, { useContext, useEffect, useRef } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Context as AuthContext } from '../context/AuthContext';\r\n\r\nconst Logout = () => {\r\n  const { logout } = useContext(AuthContext);\r\n\r\n  const logoutFunc = useRef(logout);\r\n\r\n  useEffect(() => {\r\n    logoutFunc.current();\r\n  }, []);\r\n\r\n  return <Redirect to=\"/\" />;\r\n};\r\n\r\nexport default Logout;\r\n","import React, { useContext } from 'react';\r\nimport { Context as AuthContext } from '../../context/AuthContext';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, render, ...rest }) => {\r\n  const { state: authState } = useContext(AuthContext);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props => {\r\n        if (!authState.user)\r\n          return (\r\n            <Redirect\r\n              to={{\r\n                pathname: '/login',\r\n                state: { from: props.location }\r\n              }}\r\n            />\r\n          );\r\n        return Component ? <Component {...props} /> : render(props);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\n\nimport { Provider as MoviesProvider } from './context/MoviesContext';\nimport { Provider as AuthProvider } from './context/AuthContext';\n\nimport NavBar from './components/navBar';\n\nimport Movies from './components/movies';\nimport Rentals from './components/rentals';\nimport Customers from './components/customers';\nimport MovieForm from './components/movieForm';\nimport LoginForm from './components/loginForm';\nimport RegisterForm from './components/registerForm';\nimport NotFound from './components/notFound';\nimport Logout from './components/logout';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\nimport ProtectedRoute from './components/common/protectedRoute';\n\nconst App = () => {\n  return (\n    <AuthProvider>\n      <MoviesProvider>\n        <ToastContainer />\n        <NavBar />\n\n        <main role=\"main\" className=\"container\">\n          <Switch>\n            <ProtectedRoute path=\"/movies/:movieId\" render={props => <MovieForm {...props} hello=\"hello\" />} />\n            <Route path=\"/movies\" render={props => <Movies {...props} />} />\n            <Route path=\"/login\" render={props => <LoginForm {...props} />} />\n            <Route path=\"/register\" render={props => <RegisterForm {...props} />} />\n            <Route path=\"/rentals\" render={() => <Rentals />} />\n            <Route path=\"/customers\" render={() => <Customers />} />\n            <Route path=\"/logout\" render={() => <Logout />} />\n            <Route path=\"/not-found\" render={NotFound} />\n            <Redirect exact from=\"/\" to=\"/movies\" />\n            <Redirect to=\"/not-found\" />\n          </Switch>\n        </main>\n      </MoviesProvider>\n    </AuthProvider>\n  );\n};\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.css';\nimport logger from './services/logService';\n\nlogger.init();\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}